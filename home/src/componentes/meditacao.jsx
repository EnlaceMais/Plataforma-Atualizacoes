 import { useState } from "react";
import Styles from '../css/meditacao.module.css';
import gratidao from '../imagem/gratidao.jpeg';
import musical from '../imagem/musical.jpg';
import movimento from '../imagem/movimento.jpg';
import { useRef } from "react";
import sugestao1 from '../imagem/sugestao1.jpg';
import sugestao from '../imagem/sugestao.jpg';
import sugestao3 from '../imagem/sugestao3.jpg';
import sugestao4 from '../imagem/sugestao4.jpeg';
import sugestao5 from '../imagem/sugestao5.jpg';
import sugestao6 from '../imagem/sugestao6.jpg';
import sugestao7 from '../imagem/sugestao7.png';
import sugestao9 from '../imagem/sugestao9.jpg';
import sugestao10 from '../imagem/sugestao10.jpg';
import sugestao11 from '../imagem/sugestao11.jpg';
import sugestao12 from '../imagem/sugestao12.jpg';
import sugestao13 from '../imagem/sugestao13.jpg';
import meditacao_ativa from '../imagem/meditacao_ativa.jpg';
import meditacao_noturno from '../imagem/meditacao_noturno.jpg';



export default function Meditacao() {
 const [etapa, setEtapa] = useState("exercicios");// inicio, gratidaoSugestoes, ouvir, sentimento
  const [tipo, setTipo] = useState("");
  const [sentimento, setSentimento] = useState("");
  const [mensagemGratidao, setMensagemGratidao] = useState("");
  const [textoGratidao, setTextoGratidao] = useState("");
  const [meditacaoSelecionada, setMeditacaoSelecionada] = useState(null);
  const mensagemRef = useRef(null);
  const carrosselRef = useRef(null);



  const opcoesSentimento = [
    { emoji: "üòå", label: "Tranquilo(a)"},
    { emoji: "üòä", label: "Feliz"},
    { emoji: "üí™", label: "Motivado(a)"},
    { emoji: "üò¢", label: "Aliviado(a)"},
    { emoji: "üåü", label: "Renovado(a)"},
  ];


  const meditacoesGratidao = [
    {
      nome: "Gratid√£o pela Vida",
      descricao: "Medita√ß√£o para cultivar gratid√£o pelo presente.",
      duracao: "10:30 minutos",
      sugestoes: ["Gratid√£o pelo hoje", "Gratid√£o pelas pessoas", "Gratid√£o pelas conquistas"],
      audio: "/audio/gratidao_pela_vida.mp3"
    },
   {
      nome: "Afirma√ß√µes para Autoestima",
      descricao: "Medita√ß√£o guiada com afirma√ß√µes para fortalecer sua autoestima e autoconfian√ßa.",
       duracao: "7:09 minutos",
     sugestoes : ["Eu sou suficiente", "Confian√ßa em mim", "Me amo como sou"],
      audio: "/audio/meditacao_autoestima.mp3",
    },
  ];
  const meditacoesMusical = [
  {
nome: "Espa√ßo Pac√≠fico",
descricao: "M√∫sica espiritual com flauta para relaxar, elevar a vibra√ß√£o e criar um ambiente de paz interior.",
duracao: "5:35 minutos",
sugestoes: ["Som da flauta", "Paz interior", "Eleva√ß√£o espiritual"],
    audio: "/audio/meditacao_sons.mp3",
  },
  {
   nome: "Calmante e Relaxante",
   descricao: "Medita√ß√£o calmante com sons suaves para relaxar o corpo e aquietar a mente.",
   duracao: "14:36 minutos",
    sugestoes: ["Tranquilidade profunda", "Relaxamento total", "Serenidade interior"],
     audio: "/audio/meditacao_relaxante.mp3",
  },
];

const meditacoesMovimento = [
  {
nome: "Pausa de 5 Minutos",
descricao: "Uma medita√ß√£o r√°pida para acalmar a mente e recentrar as emo√ß√µes.",
duracao: "5:10 minutos",
sugestoes: ["Respire fundo", "Silencie por dentro", "Retome o equil√≠brio"],
    audio: "/audio/meditacao_rapida.mp3",
  },
   {
    nome: "Calma Interior",
   descricao: "Medita√ß√£o guiada para aliviar a ansiedade e trazer presen√ßa ao agora.",
     duracao: "11:30 minutos",
    sugestoes: ["Respira√ß√£o consciente", "Pensamentos leves", "Aceitar o momento"],
    audio: "/audio/meditacao_ansiedade.mp3",
  },
];

  // Quando clica em "Gratid√£o" na tela inicial
  const iniciarGratidao = () => {
    setTipo("Gratid√£o");
    setEtapa("gratidaoSugestoes");
  };

  // Quando escolhe uma medita√ß√£o Gratid√£o para ouvir
  const ouvirMeditacao = (med) => {
    setMeditacaoSelecionada(med);
    setEtapa("ouvir");
  };

  // Quando clica em "Musical" ou "Em Movimento" na tela inicial
const iniciarMeditacao = (tipoEscolhido) => {
  setTipo(tipoEscolhido);
  if (tipoEscolhido === "Musical") {
    setEtapa("musicalSugestoes");
  } else if (tipoEscolhido === "Em Movimento") {
    setEtapa("movimentoSugestoes");
  }
};

  return (
<div className={Styles.container}>
    {etapa === "exercicios" && (
        <div className={Styles.cards_meditacao}>
     <div className={Styles.card_base} onClick={iniciarGratidao}>
      <div>
    <img src={gratidao} alt="imagem de uma mulher agradecendo" className={Styles.imagem_gratidao} />
  </div>
    <div className={Styles.conteudo}>
    <div className={Styles.card_texto}>
      <h2 className={Styles.titulo_medita}>Medita√ß√£o da Gratid√£o</h2>
      <p className={Styles.texto1}> Acalmar a mente e lembrar com carinho do que realmente importa.
       </p>
    </div>
    <button className={Styles.iniciar}>Iniciar</button> </div>
  </div>

  <div className={Styles.card_base} onClick={() => iniciarMeditacao("Musical")}>
         <div>
    {/* Aqui voc√™ pode colocar uma imagem depois */}
    <img src= {musical }alt="medita√ß√£o" className={Styles.imagem_musical} />
  </div>
       <div className={Styles.conteudo}>
    <div className={Styles.card_texto}>
      <h2 className={Styles.titulo_medita}> Medita√ß√£o Musical </h2>
      <p className={Styles.texto1}> Acalmar a mente por meio de m√∫sicas e sons relaxantes.</p>
    </div>
    <button className={Styles.iniciar}>Iniciar</button> </div>
      </div>

  <div className={Styles.card_base} onClick={() => iniciarMeditacao("Em Movimento")}>
       <div>
    <img src={movimento} alt="medita√ß√£o" className={Styles.imagem_movimento} />
     </div>
       <div className={Styles.conteudo}>
    <div className={Styles.card_texto}>
      <h2 className={Styles.titulo_medita}> Medita√ß√£o Guiada</h2>
      <p className={Styles.texto1}> Com voz e respira√ß√£o, reconecte-se com sua ess√™ncia.</p>
    </div>
    <button className={Styles.iniciar}>Iniciar</button> </div>
  </div>

<div className={Styles.card_base}>
  <div>
    <img src={meditacao_ativa} alt="Medita√ß√£o futura" className={Styles.imagem_movimento} />
  </div>
  <div className={Styles.conteudo}>
    <div className={Styles.card_texto}>
      <h2 className={Styles.titulo_medita}>Medita√ß√£o Ativa</h2>
      <p className={Styles.texto1}> Movimente-se com aten√ß√£o plena para aliviar tens√µes e renovar sua energia. </p>
      
    </div>
      <button className={Styles.iniciar}>Iniciar</button>
  </div>
</div>
<div className={Styles.card_base}>
  <div>
    <img src={meditacao_noturno} alt="Medita√ß√£o futura" className={Styles.imagem_movimento} />
  </div>
  <div className={Styles.conteudo}>
    <div className={Styles.card_texto}>
      <h2 className={Styles.titulo_medita}>Medita√ß√£o Noturna</h2>
     <p className={Styles.texto1}> Prepare-se para uma noite serena e renovadora, com relaxamento guiado.
    </p>
    </div>
    <button className={Styles.iniciar}>Iniciar</button>
  </div>
</div>



 <div className={Styles.sugestoesContainer}>
  <div>
  <h3 className={Styles.subtitulo_sugestao}>SUGEST√ïES PARA VOC√ä</h3>
</div>
  {/* <button className={Styles.setaEsquerda} onClick={scrollEsquerda}>‚Üê</button> */}

  <div className={Styles.carrossel} ref={carrosselRef}>
    {[
      { titulo: "Manh√£ Tranquila", texto: "Comece o dia com leveza e inten√ß√£o.", img: sugestao },
      { titulo: "Noite de Paz", texto: "Relaxe antes de dormir.", img: sugestao3 },
            { titulo: "Gratid√£o", texto: "Aprecie as pequenas coisas.", img: sugestao5 },
            { titulo: "Respira√ß√£o Consciente", texto: "Foque na respira√ß√£o para acalmar corpo e mente.", img: sugestao1 },
            { titulo: "Amor", texto: "Conecte-se com o amor que voc√™ tem em sua vida.", img: sugestao4 },
   {titulo: "Renova√ß√£o", texto: "Deixe que a energia da natureza leve o que n√£o te serve mais.", img: sugestao6 },
{ titulo: "Florescer", texto: "Mesmo em √°guas turvas, √© poss√≠vel crescer com leveza.", img: sugestao7 },
{ titulo: "Infinito", texto: "Sob o c√©u estrelado, lembre-se do quanto voc√™ faz parte de algo maior.", img: sugestao9 },
{ titulo: "Calma", texto: "Deixe que as ondas levem embora o que pesa e tragam o que faz bem.", img: sugestao10 },
{ titulo: "Conex√£o", texto: "Entre √°rvores e sil√™ncio, a alma encontra seu equil√≠brio.", img: sugestao11 },
   { titulo: "Ess√™ncia", texto: "Como a luz que dan√ßa no ar, sua energia tamb√©m pode encantar o mundo.", img: sugestao12 },
   { titulo: "Companhia", texto: "O tempo s√≥ fortalece os la√ßos que v√™m do cora√ß√£o.", img: sugestao13 }

    ].map((card, i) => (
      <div key={i} className={Styles.miniCard}>
        <img className={Styles.imagemMiniCard} src={card.img} alt={card.titulo} />
        <h4>{card.titulo}</h4>
        <p className={Styles.card_texto}> {card.texto}</p>
            <button className={Styles.botaoOuvir}>Ouvir agora</button>
      </div>
    ))}
  </div>

  {/* <button className={Styles.setaDireita} onClick={scrollDireita}>‚Üí</button> */}
</div>


  {/* Coment√°rios de Usu√°rios */}
<div className={Styles.comentarios}>
  <h3 className={Styles.subtitulo_comentario}>Como as pessoas se sentiram:</h3>
  <div className={Styles.listaComentarios}>
    <div className={Styles.comentario}>
      <p className={Styles.texto_comentario}>‚ÄúMe senti muito mais leve depois da pr√°tica. Gratid√£o!‚Äù</p>
      <span>‚Äì Ana, 42</span>
    </div>
    <div className={Styles.comentario}>
      <p  className={Styles.texto_comentario} >‚ÄúConsegui dormir melhor. J√° virou rotina!‚Äù</p>
      <span>‚Äì Marcos, 35</span>
    </div>
    <div className={Styles.comentario}>
      <p  className={Styles.texto_comentario}>‚Äú√â incr√≠vel como uma pausa de 10 minutos muda o meu dia.‚Äù</p>
      <span>‚Äì Juliana, 29</span>
    </div>
  </div>
</div>


      </div>
      )} 


   {etapa === "gratidaoSugestoes" && (
  <div className={Styles.escolhas}>
  {meditacoesGratidao.map((med, i) => (
  <div className={Styles.teste} key={i}>
    <h2 className={Styles.nome}>{med.nome}</h2>
    <p className={Styles.info}><b>Descri√ß√£o:</b> {med.descricao}</p>
    <p className={Styles.info}><b>Dura√ß√£o:</b> {med.duracao}</p>
    <p className={Styles.info}><b>Sugest√µes:</b></p>
    <ul className={Styles.lista}>
      {med.sugestoes.map((sug, index) => (
        <li key={index}>{sug}</li>
      ))}
    </ul>
    <div className={Styles.ouvir_container}>
      <button className={Styles.ouvir} onClick={() => ouvirMeditacao(med)}> Ouvir agora</button>
    </div>
  </div>
))}
    <button className={Styles.voltar} onClick={() => setEtapa("exercicios")}>Voltar</button>
  </div>
)}

   {etapa === "ouvir" && (
  <div className={Styles.card_ouvir}>
    <h3 className={Styles.titulo_medita}>üßò {tipo}{meditacaoSelecionada ? ` - ${meditacaoSelecionada.nome}` : ""}</h3>
    <p className={Styles.info}>Sinta-se confort√°vel e aproveite este momento para voc√™.</p>
    <div className={Styles.player}>
      {meditacaoSelecionada ? (
        <audio controls src={meditacaoSelecionada.audio} style={{ width: "100%" }} />
      ) : (
        <>üéß [Aqui ter√° um player...]</>
      )}
    </div>   
  
   {tipo === "Gratid√£o" && (
      <div className="card-gratidao">
        <h4 className={Styles.titulo_medita}>Hoje, eu sou grata por...</h4>
        <div className={Styles.opcoes}>
          <button className={Styles.opcoes_gratidao} onClick={() => setMensagemGratidao("Minha sa√∫de")}>üíñ Minha sa√∫de</button>
          <button className={Styles.opcoes_gratidao} onClick={() => setMensagemGratidao("Minha fam√≠lia")}>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Minha fam√≠lia</button>
          <button className={Styles.opcoes_gratidao} onClick={() => setMensagemGratidao("Momentos felizes")}>üåü Momentos felizes</button>
          <button className={Styles.opcoes_gratidao} onClick={() => setMensagemGratidao("Outros")}>‚ú® Outros</button>
        </div>

     {mensagemGratidao === "Outros" && (
          <input
            className={Styles.input_gratidao}
            type="text"
            placeholder="Escreva aqui sua gratid√£o..."
            value={textoGratidao}
            onChange={(e) => setTextoGratidao(e.target.value)}
          />
        )}
  

{mensagemGratidao && (
          <div className={Styles.confirmacao}>
            <p>
              Voc√™ escolheu:{" "}
              <b>{mensagemGratidao === "Outros" ? textoGratidao : mensagemGratidao}</b>
            </p>
            <button
              type="button"
              className={Styles.finalizar}
              onClick={() => setEtapa("sentimento")}
            >
              Enviar
            </button>
     </div>
        )}
      </div>
    )}
    {tipo !== "Gratid√£o" && (
      <button className={Styles.botao_finalizar} onClick={() => setEtapa("sentimento")}>
        Finalizar
      </button>
    )}
  </div>
)}

      {etapa === "musicalSugestoes" && (
  <div className={Styles.escolhas}>
    {meditacoesMusical.map((med, i) => (
      <div className={Styles.teste} key={i}>
        <h2 className={Styles.nome}>{med.nome}</h2>
        <p className={Styles.info}><b>Descri√ß√£o:</b> {med.descricao}</p>
        <p className={Styles.info}><b>Dura√ß√£o:</b> {med.duracao}</p>
        <p className={Styles.info}><b>Sugest√µes:</b></p>
        <ul className={Styles.lista}>
          {med.sugestoes.map((sug, index) => (
            <li key={index}>{sug}</li>
          ))}
        </ul>
        <div className={Styles.ouvir_container}>
          <button className={Styles.ouvir} onClick={() => ouvirMeditacao(med)}>Ouvir agora</button>
        </div>
      </div>
    ))}
  </div>
  )}

  {etapa === "movimentoSugestoes" && (
  <div className={Styles.escolhas}>
    {meditacoesMovimento.map((med, i) => (
      <div className={Styles.teste} key={i}>
        <h2 className={Styles.nome}>{med.nome}</h2>
        <p className={Styles.info}><b>Descri√ß√£o:</b> {med.descricao}</p>
        <p className={Styles.info}><b>Dura√ß√£o:</b> {med.duracao}</p>
        <p className={Styles.info}><b>Sugest√µes:</b></p>
        <ul className={Styles.lista}>
          {med.sugestoes.map((sug, index) => (
            <li key={index}>{sug}</li>
          ))}
        </ul>
        <div className={Styles.ouvir_container}>
          <button className={Styles.ouvir} onClick={() => ouvirMeditacao(med)}>Ouvir agora</button>
        </div>
      </div>
    ))}
  </div>
)}


{etapa === "sentimento" && (
  <div className={Styles.card_sentimento}>
    <h3 className={Styles.titulo_medita}>
      Como a medita√ß√£o te fez se sentir hoje?
    </h3>

    {!sentimento ? (
      <div className={Styles.grid_emojis}>
        {opcoesSentimento.map((opcao) => (
          <div
            key={opcao.label}
            className={`${Styles.emoji_card} ${sentimento === opcao.label ? "selecionado" : ""}`}
            onClick={() => setSentimento(opcao.label)}
          >
            <span className={Styles.emoji}>{opcao.emoji}</span>
            <p>{opcao.label}</p>
          </div>
        ))}
      </div>
    ) : (
      <div className={Styles.resposta_animada} ref={mensagemRef}>
        <p className={Styles.mensagem_sentimento}>
          üíñ Que lindo saber que voc√™ se sentiu <b>{sentimento}</b> hoje!
        </p>

        {tipo === "Gratid√£o" && (
          <p className={Styles.mensagem_gratidao}>
            üåü Sua gratid√£o hoje foi:{" "}
            <b>{mensagemGratidao === "Outros" ? textoGratidao : mensagemGratidao}</b>
          </p>
        )}

        <button
          className={Styles.botao_voltar}
          onClick={() => {
            setEtapa("exercicios");
            setSentimento("");
            setMensagemGratidao("");
            setTextoGratidao("");
            setMeditacaoSelecionada(null);
            setTipo("");
            salvarAtividadeNoHistorico(tipo);

            window.scrollTo({ top: 0, behavior: "smooth" });
          }}
        >
          Finalizar e Voltar
        </button>
      </div>
    )}
        </div>
      )}
    </div>
  );
}
